{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{467:function(s,t,a){\"use strict\";a.r(t);var n=a(21),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"一、走近java\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、走近java\"}},[s._v(\"#\")]),s._v(\" 一、走近Java\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"二、自动内存管理机制\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、自动内存管理机制\"}},[s._v(\"#\")]),s._v(\" 二、自动内存管理机制\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_1-java内存区域与内存溢出异常\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-java内存区域与内存溢出异常\"}},[s._v(\"#\")]),s._v(\" 1.Java内存区域与内存溢出异常\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"程序计数器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#程序计数器\"}},[s._v(\"#\")]),s._v(\" 程序计数器\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"如果正在执行的方法是Java方法，那么记录的是正在执行的虚拟机字节码指令的地址。但如果执行的本地方法，那么值会为空\")])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"java虚拟机栈\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#java虚拟机栈\"}},[s._v(\"#\")]),s._v(\" Java虚拟机栈\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"存局部变量表、操作栈、动态链接、方法出口\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"局部变量表\")])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"编译期可知的基本数据类型(long、double占2个局部变量空间，其他占1个)\")]),s._v(\" \"),a(\"li\",[s._v(\"对象引用\")])])])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"returnAddress\")]),s._v(\" \"),a(\"li\",[s._v(\"局部变量表需要的内存空间，在编译期完成分配\")])])])])])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"本地方法栈\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#本地方法栈\"}},[s._v(\"#\")]),s._v(\" 本地方法栈\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"堆\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#堆\"}},[s._v(\"#\")]),s._v(\" 堆\")]),s._v(\" \"),a(\"p\",[s._v(\"几乎所有对象、数组都在堆上分配（不一定所有）\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"划分：新生代、老年代\")]),s._v(\" \"),a(\"li\",[s._v(\"从内存分配角度划分：可划分出多个线程私有的分配缓冲区（Thread Local Allocation Buffer,TLAB）\")])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"方法区\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#方法区\"}},[s._v(\"#\")]),s._v(\" 方法区\")]),s._v(\" \"),a(\"p\",[s._v(\"存虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"运行时常量池：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"class文件中有常量池，放了编译期产生的字面量、符号引用。这些在类加载后，会放入运行时常量池\")]),s._v(\" \"),a(\"li\",[s._v(\"相比于class文件中的常量池，具备动态性。即不要求一定要先预置入class文件常量池，再进运行时常量池。运行期间也可能放进新的常量到池里。应用：比如String.intern()\")])])])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"直接内存\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#直接内存\"}},[s._v(\"#\")]),s._v(\" 直接内存\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"并不属于虚拟机运行时数据区。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"NIO类里，可以直接使用native函数直接分配堆外内存，通过Java堆里的DirectByteBuffer对象作为这块内存的引用。这样做可以避免在Java堆和Native堆里来回复制对象，可以提高性能\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"所以分配内存的时候，不能只考虑Java堆的大小，还要考虑直接内存。否则受物理内存和处理器寻址空间的限制，同样会内存溢出异常\")])])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"对象访问\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#对象访问\"}},[s._v(\"#\")]),s._v(\" 对象访问\")]),s._v(\" \"),a(\"p\",[s._v(\"Object obj = new Object()；其中，Object obj指的是，发生在本地变量表，作为一个reference类型数据，new Object()发生在堆，实例数据。方法区中会存储此对象的类型数据，如对象类型、父类、实现的接口、方法等\")]),s._v(\" \"),a(\"p\",[s._v(\"不同虚拟机有不同的实现，分为句柄访问、指针访问\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"句柄访问：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"堆中划分出一块内存--句柄池，reference中存储的就是对象的句柄地址。\")]),s._v(\" \"),a(\"li\",[s._v(\"句柄中有指向方法区中类型数据的指针，有指向堆中实例数据的指针\")])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"优点是对象移动的时候（垃圾回收时发生很普遍），reference本身不需要修改，只需要改动指针指向的地址\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"指针访问：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"reference存储的就是对象地址\")]),s._v(\" \"),a(\"li\",[s._v(\"优点是速度更快，因为节省了一次指针定位的开销\")])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"Sun HotSpot采用\")])])])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_2-垃圾收集器与内存分配策略\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-垃圾收集器与内存分配策略\"}},[s._v(\"#\")]),s._v(\" 2.垃圾收集器与内存分配策略\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"关注的目标：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"每个栈帧中分配多少内存，在类结构确定时，基本就是确定(不考虑JIT优化)，程序计数器、本地方法栈、虚拟机栈随着方法退出，这些区域的内存分配和回收是确定的，不需过多关心\")]),s._v(\" \"),a(\"li\",[s._v(\"堆和方法区中的内存，只有运行的时候才知道，内存的分配和回收时动态的。因此垃圾收集器关注的是这部分内存\")])])])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"如何确定对象已死-需要回收\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#如何确定对象已死-需要回收\"}},[s._v(\"#\")]),s._v(\" 如何确定对象已死，需要回收？\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"引用计数法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#引用计数法\"}},[s._v(\"#\")]),s._v(\" 引用计数法\")]),s._v(\" \"),a(\"p\",[s._v(\"给对象一个引用计数器，初始值为1，当有地方引用它，计数器值+1，引用失效，计数器值-1，任何时刻只要计数器的值为0，这个对象就是不可能再被使用的，可以被回收\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"缺陷：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"无法解决循环引用的问题，即A、B两个对象互相引用，但是没有外部引用指向他们\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"测试：\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-json extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[a(\"code\",[s._v(\"public class TestCounter \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    static class Student\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        private Object instance;\\n\\t\\t\\t\\t\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 占用一点内存\")]),s._v(\"\\n        private static final int _1MB = \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\" * \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\";\\n        private static byte\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" b = new byte\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"20\")]),s._v(\" * _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\";\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    public static void main(String\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args) \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        Student studentA = new Student();\\n        Student studentB = new Student();\\n        studentA.instance = studentB;\\n        studentB.instance = studentA;\\n\\n        studentA = \"),a(\"span\",{pre:!0,attrs:{class:\"token null keyword\"}},[s._v(\"null\")]),s._v(\";\\n        studentB = \"),a(\"span\",{pre:!0,attrs:{class:\"token null keyword\"}},[s._v(\"null\")]),s._v(\";\\n\\n        System.gc();\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"GC (System.gc()) \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"PSYoungGen\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" 24289K->872K(73728K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" 24289K->21360K(241664K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0182375\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"Times\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" sys=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.02\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"Full GC (System.gc()) \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"PSYoungGen\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" 872K->0K(73728K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"ParOldGen\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" 20488K->21201K(167936K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" 21360K->21201K(241664K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"Metaspace\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" 3299K->3299K(1056768K)\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0072952\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"Times\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.01\")]),s._v(\" sys=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real=\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.02\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\nHeap\\n PSYoungGen      total 73728K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used 635K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x000000076e000000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" 0x0000000773200000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" 0x00000007c0000000)\\n  eden space 63488K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"% used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x000000076e000000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x000000076e09ecf8\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x0000000771e00000)\\n  from space 10240K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"% used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x0000000771e00000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x0000000771e00000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x0000000772800000)\\n  to   space 10240K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"% used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x0000000772800000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x0000000772800000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x0000000773200000)\\n ParOldGen       total 167936K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used 21201K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x00000006ca000000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" 0x00000006d4400000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" 0x000000076e000000)\\n  object space 167936K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"12\")]),s._v(\"% used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"0x00000006ca000000\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x00000006cb4b45a0\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"0x00000006d4400000)\\n Metaspace       used 3306K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity 4500K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed 4864K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved 1056768K\\n  class space    used 360K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity 388K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed 512K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved 1048576K\\n\")])])]),a(\"p\",[s._v(\"由此可以看到，循环引用的A、B仍然被GC回收了，所以JVM用的不是引用计数法\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"根搜索算法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#根搜索算法\"}},[s._v(\"#\")]),s._v(\" 根搜索算法\")]),s._v(\" \"),a(\"p\",[s._v(\"即可达性分析。从一些GCRoot出发往下搜索，走过的路径称为引用链。当一个对象没有任何引用链相连（图论里称为不可达），则该对象是不可用的。\")]),s._v(\" \"),a(\"p\",[s._v(\"GCRoot：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"虚拟机栈（栈帧中的本地变量表）中引用的对象\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"方法区中静态属性引用的对象\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"方法区中常量引用的对象\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"本地方法栈中本地方法引用的对象\")])])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"四种引用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四种引用\"}},[s._v(\"#\")]),s._v(\" 四种引用\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"强引用：直接引用\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"软引用：内存不够不会直接抛错误，而是回收软引用，如果还是不够才抛错误\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"弱引用：不管内存够不够，下一次gc一定会回收\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"虚引用：用来回收的时候收到一个通知\")])])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"finalize\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#finalize\"}},[s._v(\"#\")]),s._v(\" finalize()\")]),s._v(\" \"),a(\"p\",[s._v(\"当对象不可达的时候，会进行第一次筛选，并第一标记。判断对象是否有必要执行finalize()方法。如果没必要（1.该对象没有重写finalize()方法或2.方法已执行过一次），直接回收；如果有必要，会进一个F-Queue队列，稍后虚拟机建立一个低优先级的finalizer线程去执行这个方法（虚拟机不会等这个方法执行完成），有一次拯救自己的机会，所以只要有任何一个引用指向它，就会被标记，这样就移出了即将回收的集合。\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * 2022/2/13\\n */\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"FinalizeEscapeGc\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"FinalizeEscapeGc\")]),s._v(\" SAVE_HOOK \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"null\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[s._v(\"@Override\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"protected\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"finalize\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Throwable\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"super\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"finalize\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"finalize method executed\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"FinalizeEscapeGc\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"SAVE_HOOK \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"this\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        SAVE_HOOK \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"FinalizeEscapeGc\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 第一次自救\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"escape\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 再来一次\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"escape\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"private\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"escape\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        SAVE_HOOK \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"null\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"gc\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// finalize优先级低 这里先暂停一下\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"500\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"if\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"SAVE_HOOK \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"!=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"null\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"yes i am alive\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"else\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"no i am dead\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"上述代码可以看出，对象执行finalize有一次自救的机会\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"垃圾收集算法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#垃圾收集算法\"}},[s._v(\"#\")]),s._v(\" 垃圾收集算法\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"标记-清除\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#标记-清除\"}},[s._v(\"#\")]),s._v(\" 标记-清除\")]),s._v(\" \"),a(\"p\",[s._v(\"最基础，其他的算法基于标记清除改进\")]),s._v(\" \"),a(\"p\",[s._v(\"缺点：产生较多内存碎片，如果有大对象就无法分配，只能触发一次额外GC\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"复制算法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#复制算法\"}},[s._v(\"#\")]),s._v(\" 复制算法\")]),s._v(\" \"),a(\"p\",[s._v(\"把内存划分成两块，保留一块不用，只有其中一块。每次只要这块内存用完了，就把存活的对象复制到另一块，然后一次清除掉用过的内存\")]),s._v(\" \"),a(\"p\",[s._v(\"优点：内存分配不用考虑内存碎片，只要移动堆顶指针，按顺序分配内存。简单高效\")]),s._v(\" \"),a(\"p\",[s._v(\"缺点：可用内存缩小。\")]),s._v(\" \"),a(\"p\",[s._v(\"新生代是采用复制算法\")]),s._v(\" \"),a(\"p\",[s._v(\"Eden : Survivor = 8 ： 1 ： 1\")]),s._v(\" \"),a(\"p\",[s._v(\"每次保留其中一块survivor不用，可用空间为90%。新生代大部分对象朝生夕死\")]),s._v(\" \"),a(\"p\",[s._v(\"分配担保：当survivor没法放下存活的对象时，可以通过分配担保机制进入老年代\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"标记整理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#标记整理\"}},[s._v(\"#\")]),s._v(\" 标记整理\")]),s._v(\" \"),a(\"p\",[s._v(\"让所有存活的对象向一端移动，直接清理掉端边界以外的内存\")]),s._v(\" \"),a(\"p\",[s._v(\"适合老年代\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"垃圾收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#垃圾收集器\"}},[s._v(\"#\")]),s._v(\" 垃圾收集器\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1644932957328-cd5008e7-943c-4912-b02d-e1f0d621cdc6.png\",alt:\"img\"}})]),s._v(\" \"),a(\"h4\",{attrs:{id:\"serial收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#serial收集器\"}},[s._v(\"#\")]),s._v(\" Serial收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"单线程，垃圾收集时会Stop The World，后台停止用户线程，直到收集结束\")]),s._v(\" \"),a(\"p\",[s._v(\"虚拟机运行在client模式下的默认收集器，因为分配的内存不会很大，垃圾收集时间往往只需要几十毫秒，只要不频繁，完全可以接受。\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"parnew收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#parnew收集器\"}},[s._v(\"#\")]),s._v(\" ParNew收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"Serial收集器的多线程版本，很多特性共用。\")]),s._v(\" \"),a(\"p\",[s._v(\"运行在Server模式下虚拟机的首选收集器，因为除了Serial，只有ParNew新生代收集器，是可以和真正并发的收集器--CMS收集器配合。因为CMS是无法与新生代收集器Parallel Scavenge收集器配合。\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:+UseConcMarkSweepGC，默认新生代收集器为ParNew\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:+UseParNewGC，强制使用ParNew收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"ParNew在单CPU环境下可能效果并不比Serial要好，但是在多CPU环境下，GC时对系统资源利用有好处，默认线程数与CPU数相同\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:ParallelGCThread可以限制垃圾收集的线程数\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"parallel-scavenge收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#parallel-scavenge收集器\"}},[s._v(\"#\")]),s._v(\" Parallel Scavenge收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"与Serial、ParNew一样是使用复制算法的新生代收集器，多线程。\")]),s._v(\" \"),a(\"p\",[s._v(\"不同之处在于，其他收集器关注尽可能缩短用户线程的停顿时间，而Parallel Scavenge收集器则致力于实现可控制的吞吐量\")]),s._v(\" \"),a(\"p\",[s._v(\"三个参数：\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:MaxGCPauseMills 垃圾收集最大停顿时间。缩短停顿时间是以牺牲吞吐量、新生代内存空间为代价。系统把新生代调小，那么收集更少的空间，需要停顿的时间也就更短，但这会导致GC更加频繁，可能反而总的GC时间更多，吞吐量降低\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:GCTimeRatio 直接设置吞吐量。如果设置19，那么GC时间是1/20=5%，吞吐量95%。如果设置99，那么GC时间是1/100=1%，吞吐量99%\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:+UseAdaptiveSizePolicy 这个参数，可以设置GC自适应调节策略。不需要指定新生代大小、Eden与Survivor比例、晋升老年代对象年龄等细节参数，只需要设置最大最小堆大小，设置一直关注的目标，-XX:MaxGCPauseMills或-XX:GCTimeRatio，让虚拟机动态调整参数提供最合适的停顿时间或吞吐量\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"serial-old收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#serial-old收集器\"}},[s._v(\"#\")]),s._v(\" Serial Old收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"Serial收集器的老年代版本，使用标记-整理算法，单线程，同样在client模式下虚拟机使用\")]),s._v(\" \"),a(\"p\",[s._v(\"如果在server模式下使用，有两种用途：1.配合Parallel Scavenge 2.作为CMS的后背预案\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"parallel-old收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#parallel-old收集器\"}},[s._v(\"#\")]),s._v(\" Parallel Old收集器\")]),s._v(\" \"),a(\"p\",[s._v(\"Parallel Scavenge的老年代版本。多线程，标记-整理。\")]),s._v(\" \"),a(\"p\",[s._v(\"主要用途是配合Parallel Scavenge。因为Parallel Scavenge无法与CMS配合，在Parallel Old出现前，只能和Serial Old这种单线程收集器配合使用，服务端性能拖累\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"cms收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cms收集器\"}},[s._v(\"#\")]),s._v(\" CMS收集器\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"四个阶段：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"初始标记：标记GCRoot能直接关联到的对象，速度很快\")]),s._v(\" \"),a(\"li\",[s._v(\"并发标记：GC Roots Tracing\")])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"重新标记：修正并发标记期间，由于用户程序运行导致标记变动的那部分对象。停顿时间比初始标记长，但远比并发标记短\")]),s._v(\" \"),a(\"li\",[s._v(\"并发清除：\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"其中，初始标记、重新标记，仍然需要Stop the World。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"最耗时的是并发标记、并发清除\")])])]),s._v(\" \"),a(\"p\",[s._v(\"CMS收集器采用标记清除算法\")]),s._v(\" \"),a(\"p\",[s._v(\"优点：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"设计目标：最短回收停顿时间\")])]),s._v(\" \"),a(\"p\",[s._v(\"缺点：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"CPU资源敏感\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"无法处理浮动垃圾\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"产生内存碎片\")])])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"g1收集器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#g1收集器\"}},[s._v(\"#\")]),s._v(\" G1收集器\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"与CMS相比改进点：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"基于标记-整理算法，不会产生碎片\")]),s._v(\" \"),a(\"li\",[s._v(\"精确控制停顿。即可以指定在长度为M毫秒的时间段内，GC时间不超过N毫秒\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"为什么能够实现不牺牲吞吐量，完成低停顿回收？\")])])]),s._v(\" \"),a(\"p\",[s._v(\"避免全区域GC。把整个Java堆，划分为几个独立区域，跟踪垃圾堆积密度，后台维护一个优先列表，每次根据允许的收集时间，优先回收垃圾最多的区域。\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"gc常用参数\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#gc常用参数\"}},[s._v(\"#\")]),s._v(\" GC常用参数\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645712381283-5e0a110f-cb8b-4779-8eea-be9737980515.png\",alt:\"img\"}})]),s._v(\" \"),a(\"h3\",{attrs:{id:\"内存分配与回收策略\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#内存分配与回收策略\"}},[s._v(\"#\")]),s._v(\" 内存分配与回收策略\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"对象优先在eden分配\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#对象优先在eden分配\"}},[s._v(\"#\")]),s._v(\" 对象优先在Eden分配\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * 2022/2/26\\n * 参数 -XX:+PrintGCDetails -Xms20M -Xmx20M -Xmn10M -XX:SurvivorRatio=8 -XX:+UseSerialGC\\n * Eden:10M，其中9M可用\\n * Serial+Serial Old组合\\n */\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TestAllocation\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"private\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"final\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" _1MB \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" a1\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a2\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a3\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a4\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a5\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a1 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a2 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a3 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\t\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 出现一次Minor GC\")]),s._v(\"\\n        a4 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"    \\n        a5 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"这里的GC日志与书中的日志不相符。\")]),s._v(\" \"),a(\"p\",[s._v(\"书中描述，当分配a4的时候，由于共9M的eden空间不足，于是触发MinorGC，但是由于Survivor区只有1M，空间不足以放a1、a2、a3，于是通过分配担保机制，这6M大小进入老年代，4M的a4会分配在Elden\")]),s._v(\" \"),a(\"p\",[s._v(\"但是实测下来，分配了5M之前都是在Eden区，但是a1、a2、a3共6M分配之后，就已经开始出现MinorGC。a1、a2共4M进入了老年代，a3分配到了eden\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-plain extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-plain\"}},[a(\"code\",[s._v(\"[GC (Allocation Failure) [DefNew: 6444K->810K(9216K), 0.0042813 secs] 6444K->4906K(19456K), 0.0043266 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \\nHeap\\n def new generation   total 9216K, used 3188K [0x00000000fec00000, 0x00000000ff600000, 0x00000000ff600000)\\n  eden space 8192K,  29% used [0x00000000fec00000, 0x00000000fee52998, 0x00000000ff400000)\\n  from space 1024K,  79% used [0x00000000ff500000, 0x00000000ff5ca8f8, 0x00000000ff600000)\\n  to   space 1024K,   0% used [0x00000000ff400000, 0x00000000ff400000, 0x00000000ff500000)\\n tenured generation   total 10240K, used 4096K [0x00000000ff600000, 0x0000000100000000, 0x0000000100000000)\\n   the space 10240K,  40% used [0x00000000ff600000, 0x00000000ffa00020, 0x00000000ffa00200, 0x0000000100000000)\\n Metaspace       used 3303K, capacity 4496K, committed 4864K, reserved 1056768K\\n  class space    used 360K, capacity 388K, committed 512K, reserved 1048576K\\n\")])])]),a(\"p\",[s._v(\"分配完a4的日志如下：可以看出a3、a4共计6M分配在Eden区，老年代4M\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-plain extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-plain\"}},[a(\"code\",[s._v(\"[GC (Allocation Failure) [DefNew: 6444K->797K(9216K), 0.0033512 secs] 6444K->4893K(19456K), 0.0034188 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \\nHeap\\n def new generation   total 9216K, used 7429K [0x00000000fec00000, 0x00000000ff600000, 0x00000000ff600000)\\n  eden space 8192K,  80% used [0x00000000fec00000, 0x00000000ff279e48, 0x00000000ff400000)\\n  from space 1024K,  77% used [0x00000000ff500000, 0x00000000ff5c76a8, 0x00000000ff600000)\\n  to   space 1024K,   0% used [0x00000000ff400000, 0x00000000ff400000, 0x00000000ff500000)\\n tenured generation   total 10240K, used 4096K [0x00000000ff600000, 0x0000000100000000, 0x0000000100000000)\\n   the space 10240K,  40% used [0x00000000ff600000, 0x00000000ffa00020, 0x00000000ffa00200, 0x0000000100000000)\\n Metaspace       used 3262K, capacity 4496K, committed 4864K, reserved 1056768K\\n  class space    used 359K, capacity 388K, committed 512K, reserved 1048576K\\n\")])])]),a(\"p\",[s._v(\"如果再分配1M的a5，仍然在Eden区，共7M，这里很奇怪，之前6M就已经触发MinorGC，这时没有触发，如果a5大小为2M，会触发第二次MinorGC，a3也会进入老年代，剩下a4、a5共6M在Eden\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-plain extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-plain\"}},[a(\"code\",[s._v(\"[GC (Allocation Failure) [DefNew: 6444K->800K(9216K), 0.0035625 secs] 6444K->4897K(19456K), 0.0036098 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \\n[GC (Allocation Failure) [DefNew (promotion failed) : 7350K->6570K(9216K), 0.0019683 secs][Tenured: 6845K->6845K(10240K), 0.0024806 secs] 11446K->10962K(19456K), [Metaspace: 3258K->3258K(1056768K)], 0.0045052 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] \\nHeap\\n def new generation   total 9216K, used 6466K [0x00000000fec00000, 0x00000000ff600000, 0x00000000ff600000)\\n  eden space 8192K,  78% used [0x00000000fec00000, 0x00000000ff250950, 0x00000000ff400000)\\n  from space 1024K,   0% used [0x00000000ff400000, 0x00000000ff400000, 0x00000000ff500000)\\n  to   space 1024K,   0% used [0x00000000ff500000, 0x00000000ff500000, 0x00000000ff600000)\\n tenured generation   total 10240K, used 6845K [0x00000000ff600000, 0x0000000100000000, 0x0000000100000000)\\n   the space 10240K,  66% used [0x00000000ff600000, 0x00000000ffcaf558, 0x00000000ffcaf600, 0x0000000100000000)\\n Metaspace       used 3265K, capacity 4496K, committed 4864K, reserved 1056768K\\n  class space    used 359K, capacity 388K, committed 512K, reserved 1048576K\\n\")])])]),a(\"ul\",[a(\"li\",[a(\"strong\",[s._v(\"MinorGC\")]),s._v(\"：新生代的GC，新生代对象朝生夕死，回收速度比较快\")]),s._v(\" \"),a(\"li\",[a(\"strong\",[s._v(\"MajorGC/FullGC\")]),s._v(\"：老年代的GC，出现了MajorGC，一般伴随着MinorGC(不绝对，ParallelScavenge可以选择直接MajorGC)。MajorGC速度比MinorGC慢10倍以上\")])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"大对象直接进入老年代\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#大对象直接进入老年代\"}},[s._v(\"#\")]),s._v(\" 大对象直接进入老年代\")]),s._v(\" \"),a(\"p\",[s._v(\"大对象就是需要大量连续内存空间的对象，比如上面的byte[]，我们应该尽量避免大对象，因为会容易导致内存中海油不少空间就提前触发GC来存放大对象\")]),s._v(\" \"),a(\"p\",[s._v(\"-XX:PretenureSizeThreshold=10M\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"可以设置阈值，大于阈值的对象，会直接分配在老年代\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"避免Eden区与Survivor区之间发生大量内存拷贝\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"只对Serial、ParNew两款收集器有效\")])])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"长期存活的对象将进入老年代\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#长期存活的对象将进入老年代\"}},[s._v(\"#\")]),s._v(\" 长期存活的对象将进入老年代\")]),s._v(\" \"),a(\"p\",[s._v(\"出生在Eden区的对象，对象年龄为0，经过第一次MinorGC且能被Survivor容纳的话，对象年龄为1。然后每熬过一轮MinorGC，对象年龄+1，当达到阈值(默认15)，将进入老年代。阈值通过参数-XX:MaxTenuringThreshold设置\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * 2022/2/27\\n * 进入老年代的阈值-XX:MaxTenuringThreshold\\n * -XX:+PrintGCDetails -Xms20M -Xmx20M -Xmn10M -XX:SurvivorRatio=8 -XX:+UseSerialGC -XX:MaxTenuringThreshold=1 -XX:+PrintTenuringDistribution\\n */\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TestTenuringThreshold\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"private\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"final\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" _1MB \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" a1\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a2\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"a3\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a1 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"_1MB \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a2 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a3 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a3 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"null\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        a3 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" _1MB\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"实测下来，现象与书中不一致，原因暂时没有想明白。\")]),s._v(\" \"),a(\"p\",[s._v(\"MaxTenuringThreshold=1:\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Allocation\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DefNew\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Desired\")]),s._v(\" survivor size \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"524288\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" threshold \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"max \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\" age   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\" total\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"6700\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"1024K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0052175\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"6700\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"5173K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19456\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0052856\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Times\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" sys\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.01\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Allocation\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DefNew\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Desired\")]),s._v(\" survivor size \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"524288\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" threshold \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"max \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\" age   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1792\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1792\")]),s._v(\" total\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5368\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"1K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0016983\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9517\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"5109K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19456\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0017603\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Times\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" sys\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Heap\")]),s._v(\"\\n def \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" generation   total \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4235\")]),s._v(\"K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000fec00000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  eden space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8192\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"51\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000fec00000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff022798\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  from space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400700\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"to\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"space\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n tenured generation   total \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10240\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5107\")]),s._v(\"K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n   the space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10240\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"49\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ffafce90\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ffafd000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Metaspace\")]),s._v(\"       used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3324\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4496\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4864\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1056768\")]),s._v(\"K\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" space    used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"361\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"388\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"512\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\"K\\n\")])])]),a(\"p\",[s._v(\"书中描述：a1大小256k，分配a2的时候触发第一次MinorGC，Survivor足够容纳，进入Survivor，对象年龄为1。第二次MinorGC时，因为阈值为1，此时进入老年代。新生代会干净\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645959217253-e331ce0c-0ece-4d09-8c6b-e59742ac7f52.png\",alt:\"img\"}})]),s._v(\" \"),a(\"p\",[s._v(\"MaxTenuringThreshold=15:\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Allocation\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DefNew\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Desired\")]),s._v(\" survivor size \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"524288\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" threshold \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"max \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"15\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\" age   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\" total\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"6700\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"1024K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0029448\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"6700\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"5148K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19456\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0029874\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Times\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" sys\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"GC \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Allocation\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Failure\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DefNew\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Desired\")]),s._v(\" survivor size \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"524288\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" threshold \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"15\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"max \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"15\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\" age   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1840\")]),s._v(\" bytes\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1840\")]),s._v(\" total\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5368\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"1K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0012153\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9492\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"5078K\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19456\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0012501\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Times\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" sys\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" real\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\" secs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Heap\")]),s._v(\"\\n def \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" generation   total \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9216\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4235\")]),s._v(\"K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000fec00000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  eden space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8192\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"51\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000fec00000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff022568\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  from space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff400730\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"to\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"space\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff500000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n tenured generation   total \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10240\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5076\")]),s._v(\"K \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n   the space \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10240\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"49\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\" used \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ff600000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ffaf52d0\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x00000000ffaf5400\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0x0000000100000000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Metaspace\")]),s._v(\"       used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3261\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4496\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4864\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1056768\")]),s._v(\"K\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" space    used \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"359\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" capacity \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"388\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" committed \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"512\")]),s._v(\"K\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" reserved \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1048576\")]),s._v(\"K\\n\")])])]),a(\"p\",[s._v(\"书中描述：当第二次MinorGC后，a1仍然留在Survivor，仍然有404k空间被占用。a1对象年龄为2\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645959203136-aeb3352d-4d47-4f02-8743-351a02656a80.png\",alt:\"img\"}})]),s._v(\" \"),a(\"h4\",{attrs:{id:\"空间分配担保\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#空间分配担保\"}},[s._v(\"#\")]),s._v(\" 空间分配担保\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"MinorGC时，虚拟机检测之前每次晋升到老年代的对象平均大小，和老年代剩余空间比较，\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"如果大于，说明老年代很可能剩余空间不够这次晋升了，发生FullGC\")]),s._v(\" \"),a(\"li\",[s._v(\"如果小于\")])])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"-XX:-HandlerPromotionFailure，开关打开，只会进行MinorGC。\")]),s._v(\" \"),a(\"li\",[s._v(\"开关关闭，FullGC\")])])])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"这个开关打开的话，就是认为不怕担保失败，认为这次大概率小于平均值，可以担保成功。如果关闭的话，就是悲观地认为空间肯定不够，干脆直接FullGC\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"如果本次对象大小突增，远高于平均值，那么就导致担保失败，失败之后会进行一次FullGC\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"大部分情况下，会把开关打开，避免频繁FullGC\")])])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_3-虚拟机性能监控与故障处理工具\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-虚拟机性能监控与故障处理工具\"}},[s._v(\"#\")]),s._v(\" 3.虚拟机性能监控与故障处理工具\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"命令行工具\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#命令行工具\"}},[s._v(\"#\")]),s._v(\" 命令行工具\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jps\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jps\"}},[s._v(\"#\")]),s._v(\" jps\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"D\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Java\")]),s._v(\"\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DemoCode\")]),s._v(\"\\\\JVM\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"jps\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"543116\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Launcher\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"173156\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"250948\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TestDeadLock\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"260692\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Jps\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"476140\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Launcher\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"可以列出正在运行的进程。由LVMID(Local Virtual Machine Identifier)、主类名称组成\")]),s._v(\" \"),a(\"p\",[s._v(\"对于本地虚拟机进程：LVMID和操作系统的进程ID一致\")]),s._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[s._v(\"后缀\")]),s._v(\" \"),a(\"th\",[s._v(\"功能\")])])]),s._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[s._v(\"-q\")]),s._v(\" \"),a(\"td\",[s._v(\"只输出LVMID\")])]),s._v(\" \"),a(\"tr\",[a(\"td\",[s._v(\"-m\")]),s._v(\" \"),a(\"td\",[s._v(\"输出传给main()函数的参数\")])]),s._v(\" \"),a(\"tr\",[a(\"td\",[s._v(\"-l\")]),s._v(\" \"),a(\"td\",[s._v(\"类的全名，如果执行的是Jar包，输出Jar包路径\")])]),s._v(\" \"),a(\"tr\",[a(\"td\",[s._v(\"-v\")]),s._v(\" \"),a(\"td\",[s._v(\"进程启动时JVM参数\")])])])]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jstat\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jstat\"}},[s._v(\"#\")]),s._v(\" jstat\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"格式：jstat option vmid [interval[s|ms] [count]]\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"本地虚拟机vmid和lvmid一致， interval表示查询频率，默认ms，count表示查询次数\")]),s._v(\" \"),a(\"li\",[s._v(\"如：jstat -gc 250948 250 20\")])])])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645969460581-ee8613f1-7c89-4150-9ea4-4ce0d5a11b0a.png\",alt:\"img\"}})]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"-gcutil\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"D\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\"\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Java\")]),s._v(\"\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"DemoCode\")]),s._v(\"\\\\JVM\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"jstat \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"gcutil \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"250948\")]),s._v(\"\\n  S0     S1     \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"E\")]),s._v(\"      \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"O\")]),s._v(\"      \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"M\")]),s._v(\"     CCS    YGC     YGCT    FGC    FGCT     GCT\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.00\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"33.73\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"43.81\")]),s._v(\"   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.01\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"94.27\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"88.95\")]),s._v(\"      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.005\")]),s._v(\"     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.000\")]),s._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.005\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"含义：\")]),s._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[s._v(\"S0\")]),s._v(\" \"),a(\"th\",[s._v(\"S1\")]),s._v(\" \"),a(\"th\",[s._v(\"E\")]),s._v(\" \"),a(\"th\",[s._v(\"O\")]),s._v(\" \"),a(\"th\",[s._v(\"M\")]),s._v(\" \"),a(\"th\",[s._v(\"CCS\")]),s._v(\" \"),a(\"th\",[s._v(\"YGC\")]),s._v(\" \"),a(\"th\",[s._v(\"YGCT\")]),s._v(\" \"),a(\"th\",[s._v(\"FGC\")]),s._v(\" \"),a(\"th\",[s._v(\"FGCT\")]),s._v(\" \"),a(\"th\",[s._v(\"GCT\")])])]),s._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[s._v(\"Survivor\")]),s._v(\" \"),a(\"td\",[s._v(\"Eden区\")]),s._v(\" \"),a(\"td\",[s._v(\"永久代\")]),s._v(\" \"),a(\"td\"),s._v(\" \"),a(\"td\"),s._v(\" \"),a(\"td\",[s._v(\"YoungGC次数\")]),s._v(\" \"),a(\"td\",[s._v(\"YoungGC耗时\")]),s._v(\" \"),a(\"td\",[s._v(\"FullGC次数\")]),s._v(\" \"),a(\"td\",[s._v(\"FullGC耗时\")]),s._v(\" \"),a(\"td\",[s._v(\"总GC耗时\")]),s._v(\" \"),a(\"td\")])])]),s._v(\" \"),a(\"p\",[s._v(\"如果是P，表示永久代(Permanent)\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jinfo\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jinfo\"}},[s._v(\"#\")]),s._v(\" jinfo\")]),s._v(\" \"),a(\"p\",[s._v(\"jinfo [option] pid\")]),s._v(\" \"),a(\"p\",[s._v(\"如：jinfo 250948\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jmap\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jmap\"}},[s._v(\"#\")]),s._v(\" jmap\")]),s._v(\" \"),a(\"p\",[s._v(\"可以获得堆转存储快照(heapdump/dump文件)\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"获得dump文件的方式：\")])]),s._v(\" \"),a(\"li\",[a(\"ul\",[a(\"li\",[s._v(\"kill -3，恐吓虚拟机\")]),s._v(\" \"),a(\"li\",[s._v(\"-XX:+HeapDumpOnOutOfMemoryError，可以在OOM之后，自动生成dump文件\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"命令格式：jmap [option] vmid\")])])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645971132036-6cb402b3-0c7b-4dd0-956d-a444b90db469.png\",alt:\"img\"}})]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jhat\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jhat\"}},[s._v(\"#\")]),s._v(\" jhat\")]),s._v(\" \"),a(\"p\",[s._v(\"dump文件的分析工具，一般不用，不会在服务器上直接分析dump文件，因为比较消耗硬件资源，而且功能也少\")]),s._v(\" \"),a(\"p\",[s._v(\"一般用：Visual VM或者专业分析dump工具，如Eclipse Memory Analyzer、IBM HeapAnalyzer\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jstack\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jstack\"}},[s._v(\"#\")]),s._v(\" jstack\")]),s._v(\" \"),a(\"p\",[s._v(\"用于生成线程堆栈快照(threaddump文件或javacore文件)，目的是定位线程长时间停顿原因，如线程死锁、死循环、请求外部资源导致的长时间等待\")]),s._v(\" \"),a(\"p\",[s._v(\"jstack [option]  vmid\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1645971572877-a93a414e-0fd6-4024-8a16-059dc42f9926.png\",alt:\"img\"}})]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"实际项目中，可以通过下面的方法，输出堆栈信息，做成管理员页面\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"for\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Map\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"Entry\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"StackTraceElement\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" threadEntry \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getAllStackTraces\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"entrySet\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),s._v(\" thread \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" threadEntry\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getKey\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"StackTraceElement\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" stackTrace \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" threadEntry\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getValue\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"if\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"thread\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"equals\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"currentThread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"continue\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"print\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"\\\\n线程:\"')]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),s._v(\" thread\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getName\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"\\\\n\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"for\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"StackTraceElement\")]),s._v(\" stackTraceElement \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" stackTrace\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"print\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"\\\\t\"')]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),s._v(\" stackTraceElement\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"\\\\n\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"h3\",{attrs:{id:\"可视化工具\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#可视化工具\"}},[s._v(\"#\")]),s._v(\" 可视化工具\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"jconsole\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jconsole\"}},[s._v(\"#\")]),s._v(\" Jconsole\")]),s._v(\" \"),a(\"p\",[s._v(\"1.内存监控\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * 2022/3/6\\n * -Xms100m -Xmx100m -XX:+UseSerialGC\\n */\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TestMonitorMemory\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" placeHolder \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"64\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"fillHeap\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"执行完了方法\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"fillHeap\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" num\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"List\")]),a(\"span\",{pre:!0,attrs:{class:\"token generics\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\" list \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"ArrayList\")]),a(\"span\",{pre:!0,attrs:{class:\"token generics\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"for\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" i \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" i \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\" num\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" i\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"++\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"50\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n           list\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"gc\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"运行代码，指定堆内存100M。每次生成一个64K的对象，大概1600个对象会把堆填充满，然后发生OOM\")]),s._v(\" \"),a(\"p\",[s._v(\"Eden区表现为折线图，一直在增加，满了就回收\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1646532575383-ad2aca01-5885-4a1b-ae2e-fd2c292caf51.png\",alt:\"img\"}})]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1646534683871-0cf86836-d4bd-4676-ba77-82ad139b2056.png\",alt:\"img\"}})]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"上图中，堆内存表现为一直上涨，即时是循环了1000次，然后执行了System.gc()，被填充到堆中的对象还活着，直到最后发生OOM，才清空了堆内存。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"这是因为执行的时候，fillHeap方法仍然没有退出，list对象在执行的时候仍然处于作用域内。所以要把它放在fillHeap方法外执行\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"如果执行2000次，会发生下面的结果，直到OOM，把堆内存清空\")])])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1646532951212-145e4232-f187-4172-aeef-572f51a057b9.png\",alt:\"img\"}})]),s._v(\" \"),a(\"p\",[s._v(\"如下，把System.gc()放在方法外执行\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * 2022/3/6\\n * -Xms100m -Xmx100m -XX:+UseSerialGC\\n */\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TestMonitorMemory\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" placeHolder \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"64\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1024\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"fillHeap\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"gc\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"执行完了gc\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"100000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"fillHeap\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" num\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"throws\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InterruptedException\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"List\")]),a(\"span\",{pre:!0,attrs:{class:\"token generics\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\" list \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"ArrayList\")]),a(\"span\",{pre:!0,attrs:{class:\"token generics\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"for\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" i \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" i \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\" num\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" i\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"++\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Thread\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"50\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n           list\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"OOMObject\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[a(\"img\",{attrs:{src:\"https://cdn.nlark.com/yuque/0/2022/png/12450544/1646533874647-1a4fcdcf-966e-4abd-9c68-814aa9cf7c4c.png\",alt:\"img\"}})]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_4-调优案例分析与实战\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-调优案例分析与实战\"}},[s._v(\"#\")]),s._v(\" 4.调优案例分析与实战\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"三、虚拟机执行子系统\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、虚拟机执行子系统\"}},[s._v(\"#\")]),s._v(\" 三、虚拟机执行子系统\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"四、程序编译与代码优化\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四、程序编译与代码优化\"}},[s._v(\"#\")]),s._v(\" 四、程序编译与代码优化\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"五、高效并发\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#五、高效并发\"}},[s._v(\"#\")]),s._v(\" 五、高效并发\")])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}